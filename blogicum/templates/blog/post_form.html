<!-- наследуем общий шаблон с шапкой/подвалом. -->
{% extends "base.html" %}
<!-- здесь вставляем основное содержимое страницы. -->
{% block content %}
  <!-- В заголовке проверяем: если у формы есть instance.pk (т. е. мы редактируем уже существующий объект), пишем «Редактировать», иначе «Создать». -->
  <h1>{% if form.instance.pk %}Редактировать{% else %}Создать{% endif %} публикацию</h1>

  <!-- отправляем данные методом POST (т. к. меняем состояние на сервере).
   enctype="multipart/form-data" — нужно, если у формы есть загрузка файлов. -->
  <form method="post" enctype="multipart/form-data">
    <!-- {% csrf_token %} — тег, вставляющий скрытое поле с CSRF-токеном: без него Django отклонит POST-запрос. -->
    {% csrf_token %}
    <!-- {{ form.non_field_errors }} — показывает ошибки, не относящиеся к конкретному полю (например, при clean() всей формы). -->
    {{ form.non_field_errors }}

      {% for field in form %}
        <div>
          {{ field.label_tag }}<br>
          {{ field }}<br>
          {{ field.errors }}
        </div>
      {% endfor %}

    <!-- Кнопка отправки формы. -->
    <button type="submit">Сохранить</button>
  </form>
{% endblock %}
<!-- Закрываем форму и блок контента. -->
